<a id="StartPoint"></a>
![scoreboard](https://user-images.githubusercontent.com/47788812/170118798-e2d26e1c-f382-4e9c-9fbf-0631507f88cb.png)

---
# Данная работа не имеет какого-то готового игрового продукта. 
## Основные цели в проекте: 
* ### Научиться работать с конструкторами классов 
* ### Создавать предметы с использованием ScriptableObject
* ### Научиться реализовывать инвентарь
---

### Описание проекта

Работа реализована в формате игры-шутера от первого лица. Предметы для подбора размещены в игровой сцене. Управление игроку представлено с использованием клавиш WASD для движения, управления мышью для поворотов и стрельбы. При помощи клавиши __I__ на клавиатуре можно вызвать инвентарь, а при помощи клавиши __ESCAPE__ режим паузы. Все предметы игровой сцены можно подобрать, соприкоснувшись с ними (на объектаъх используется триггер).

__1. Подбор и использование брони__

В сцене размещено 3 варианта условной брони для персонажа. Каждая броня условно влияет на характеристики игрока: скорость, жизни и опыт. Изменение скорости изменяет скорость движение игрока по сцене, остальные характеристики ничего не изменяют, реализованы исключительно для примера (меняются значения жизней и опыта на экране).
![Armors](https://user-images.githubusercontent.com/47788812/170120919-f2e6523e-5ac2-4224-8ff7-256d39bd3180.PNG)
_Внешний вид брони в сцене_

Для взаимодействия с броней был определен класс __Armor__. В нем происходит основное взаимодействие. Характеристики для брони реализуются созданием нового объекта этого класса. 
![CodeArmor](https://user-images.githubusercontent.com/47788812/170121650-1dfa8b51-80e0-4ec9-ad41-8b485be35c06.PNG)
_Код класса Armor_

Каждый игровой объект брони имеет определенные зараннее характеристики скорости, жизней, опыта.
При старте игры каждый игровой объект брони создает свой экземпляр класса __Armor__ и при подборе игроком брони передает ему характеристики своего экземпляра. 
Игрок же в компоненте __PlayerController__ имеет метод записи принятых характеристик и вывод обновленных значений на экран.
![CodeSetArmor](https://user-images.githubusercontent.com/47788812/170122833-f67dc11c-5cc7-4b71-b50f-ba7652166624.PNG)

__2. Подбор и использование оружия__

Оружие в игровом проекте есть двух видов: пистолет и полуавтомат. Внешний вид моделек характерный, хоть и собран при помощи стандартных геометрических 3D фигур UNITY.

![Weapon](https://user-images.githubusercontent.com/47788812/170132455-36a756fd-cbfc-4644-b971-036d09cf439c.PNG)
_Внешний вид оружия в сцене_

Подобранное оружие попадает в "руку" игрока и готово к использованию. Стрельба происходит по нажатию левой кнопки мыши. Так же реализован режим прицеливания, если удерживать правую кнопку мыши.
![CodeWeapon1](https://user-images.githubusercontent.com/47788812/170125571-1a4bcbf1-119e-4e65-b2c8-7ed320bea0ae.PNG)
![CodeWeapon2](https://user-images.githubusercontent.com/47788812/170125615-11d0a3ff-c472-4880-bae1-4594fc02ad5b.PNG)
_Код класса Weapon_

Каждое оружие создает свой экземпляр класса __Weapon__ на основе заранее определенных характеристик оружия (кол-во патронов в обоиме и кол-во патронов в подсумке). При стрельбе из пистолета выстреливается один патрон, при стрельбе из автомата 3 патрона. Подсчет патронов и перезарядка оружия происходит в классе __Weapon__ и прослеживается при каждом выстреле в методе __ChangeBullets()__.

![CodeShotHandgun](https://user-images.githubusercontent.com/47788812/170126197-0ceaed15-bbb2-4854-8552-71a3cd26a6fc.PNG)
_Стрельба из пистолета_

![codeShotMachinegun](https://user-images.githubusercontent.com/47788812/170126513-4715c7a7-8f28-4b52-a7bd-2a1fdbab891d.PNG)
_Стрельба из автомата_

Подбор оружия происходит путем удаления модельки из игровой сцены и создания префаба этого оружия в "руке" игрока. В руке игрок может держать лишь одно оружие. Так что при подборе оружия в сцене в __PlayerController__ реализуется метод __TakeWeapon()__.
![CodeTakeWeapon](https://user-images.githubusercontent.com/47788812/170127506-90f46ecd-9239-437e-9446-e89d63a805ca.PNG)
Метод в первую очередь проверяет было ли ранее подобрано такое оружие
![CodeCheckListWeapon](https://user-images.githubusercontent.com/47788812/170128092-e1059460-a276-4d98-9a5a-cfac3f76ccb7.PNG)
После происходит, если необходимо, удаление текущего оружия в "руке" игрока (на случай, если новое оружие не первое подобранное игроком)
![CodeResetWeapon](https://user-images.githubusercontent.com/47788812/170128205-8f9722c9-8cb1-4faa-93b9-d2555f382b69.PNG)

Так же было предусмотрено переключение между вариантами уже подобранного оружия. Если игрок оружия не подобрал или подобрал лишь одно оружие, переключение не работает. Сам же процесс переключения происходит по вращению колесика миши вверх или вниз.
![CodeSwitchWeapon](https://user-images.githubusercontent.com/47788812/170129947-349efa32-d2c7-473b-a971-50c2a6e1b6bf.PNG)
Здесь же метод __TakeWeapon()__ работает немного иначе:
![CodeTakeWeapon2](https://user-images.githubusercontent.com/47788812/170130436-822fa542-b162-4b98-98a3-0bcff284cb1b.PNG)

Так как в игровом процессе происходит создание нового клона префаба в сцене с предварительной "зачисткой" текущего оружия в "руке" игрока, появилась необходимость как-то запоминать и логично возвращать количество патронов каждого оружия. Было принято решение использовать встроенный __PlayerPrefs__. А заодно и освоить получше работу с этим компонентом библиотеки __UnityEngine__.
![CodePlayerPrefs](https://user-images.githubusercontent.com/47788812/170131522-12cb458f-2466-4d4f-a7e4-8fc525f1bc51.PNG)
_Код класса SaveDataWeapon (PlayerPrefs)_

Каждый раз меняя оружие в "руке" происходит запись текущего количества патронов, а при создании нового клона считывается и устанавливается ранее записанного значение количества патронов. 

__3. Подбор предметов для инвентаря__

В игровой сцене представленно 3 вида предметов, которые можно подобрать в инвентарь: условные яблоко, монеты, booster. 

![Items](https://user-images.githubusercontent.com/47788812/170132632-a21cb78c-b07c-448c-8d07-dbc3801022eb.PNG)
_Внешний вид предметов для инвентаря в сцене_

Для создания параметров каждого предмета были созданы 3 файла ScriptableObject. 
![CodeItemData](https://user-images.githubusercontent.com/47788812/170133062-646391ac-2ec7-4127-9873-68b458bc91ad.PNG)
Данные параметры используются при взаимодействии с инвентарем

Инвентарь же на старте игры заполняется значениями по умолчанию (пустой).
![Inventory](https://user-images.githubusercontent.com/47788812/170133513-16a45198-a454-4c52-9d9e-b3f812d800ac.PNG)

Логика работы инвентаря в целом построена на классе __InventoryManager__ и классе дочернем __CellController__. Первый в свою очередь прикреплен к самому инвентарю в сцене, а второй прикреплен к каждой ячейке инвентаря и реализует работу всех ячеек

В первую очередь стоит обратить внимание на класс __CellController__. В нем определяются 3 основных, необходимых для работы метода:
![CodeCellInventory](https://user-images.githubusercontent.com/47788812/170134397-cab90146-9eda-4591-a237-2c6da8f65367.PNG)
Метод __StateDefault()__ по умолчанию реализуется при старте игры, что заполняет ячейки инвентаря значениями по умолчанию (пустыми). В дальнейшем он вызывается, когда предмет инвентаря используется. Следующие 2 метода вызываются в родительском классе __InventoryManager__ при подборе нового предмета на сцене
![CodeSetValueInInventory](https://user-images.githubusercontent.com/47788812/170135189-fbbbe6d8-e7e7-4d35-96b9-1bec85114bd0.PNG)
_Код присвоения значений ячейкам инвентаря_

Когда игрок использует (нажимает) предмет инвентаря, просто проиходит зачистка ячейки (устанавливается состояние по умолчанию).

__4. Заключение__

Более подробно со всеми сценариями можно ознакомиться в Assets. Все скрипты размещены в папке Scripts. Делее для удобства размещение файлов разделено по папкам в зависимости от их принадлежности.

Данный проект не имеет и скорее всего не будет иметь игровой сборки. Его целью является оттачивание навыка программирования для UNITY. Мне удалось лучше понять работу компонентов движка, изучить новые способы построения игровых объектов, взаимодействия между ними, построить игровую логику таким образом, чтоб при добавлении новых предметов, оружия, брони код наименьшим образом изменялся, а лишь дополнялся по необходимости.

Для тестирования и лучшего понимания игрового процесса тестовую сборку вышеописанного проекта можно скачать с моего Яндекс.Диска. Файлы безопасны! [Скачать игровую сборку.](https://disk.yandex.ru/d/QoJXsYy9UI433g)

[Вернуться к началу](#StartPoint)